<Project>

    <PropertyGroup>
        <PackageDir>$(MSBuildThisFileDirectory)..\</PackageDir>
        <AssemblyInformationalVersionAttributeFile>$(ProjectDir)$(IntermediateOutputPath)AssemblyInformationalVersionAttribute.cs</AssemblyInformationalVersionAttributeFile>
    </PropertyGroup>

    <UsingTask
        TaskName="Briver.AssemblyInformationTask"
        AssemblyFile="$(PackageDir)Tasks\netstandard2.0\Briver.ProjectTasks.dll" />

    <Target Name="AssemblyInformationTask" BeforeTargets="CoreCompile">
        
        <PropertyGroup>
            <!--禁止生成AssemblyInformationVersionalAttribute特性-->
            <GenerateAssemblyInformationalVersionAttribute>false</GenerateAssemblyInformationalVersionAttribute>
        </PropertyGroup>
        
        <ItemGroup>
            <!--只在编译时（包含在Target中）才生效，避免其显示到解决方案中-->
            <Compile Include="$(AssemblyInformationalVersionAttributeFile)"/>
        </ItemGroup>
        
        <Briver.AssemblyInformationTask
            PackageDir="$(PackageDir)"
            ProjectDir="$(ProjectDir)"
            ProjectName="$(MSBuildProjectName)"
            AssemblyName="$(AssemblyName)"
            AssemblyFile="$(ProjectDir)$(OutputPath)$(AssemblyName)$(TargetExt)"
            AttributeFile="$(AssemblyInformationalVersionAttributeFile)"/>            

    </Target>

</Project>