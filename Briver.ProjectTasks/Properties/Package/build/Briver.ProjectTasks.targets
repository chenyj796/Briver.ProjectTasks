<Project>

  <PropertyGroup>
    <InformationVersionFile>Properties\InformationVersion.cs</InformationVersionFile>
    <GenerateAssemblyInformationalVersionAttribute>false</GenerateAssemblyInformationalVersionAttribute>
  </PropertyGroup>

  <ItemGroup>
    <Compile Remove="$(InformationVersionFile)" />
    <Compile Include="$(InformationVersionFile)" />
  </ItemGroup>
  
  <PropertyGroup>
    <TasksLibraryFolder>$(MSBuildThisFileDirectory)..\tasks\netstandard2.0</TasksLibraryFolder>
  </PropertyGroup>

  <UsingTask TaskName="Briver.ProjectTasks.InformationVersion" AssemblyFile="$(TasksLibraryFolder)\Briver.ProjectTasks.dll" />

  <Target Name="Briver" AfterTargets="PrepareForBuild;">

    <PropertyGroup>
      <InformationVersionTaskOutputMessage></InformationVersionTaskOutputMessage>
    </PropertyGroup>

    <InformationVersion ProjectDir="$(ProjectDir)" ProjectName="$(MSBuildProjectName)" AssemblyName="$(AssemblyName)">
      <Output TaskParameter="OutputMessage" PropertyName="InformationVersionTaskOutputMessage" />
    </InformationVersion>
    
    <Message Text="$(InformationVersionTaskOutputMessage)" Importance="High" Condition="'$(InformationVersionTaskOutputMessage)' != ''"/>

  </Target>

</Project>